<app-header 
  [pageTitle]="'ุชุณุฌูู ุจูุงูุงุช ุงูููุงุญู'"
  [showBackButton]="true"
  [showHomeButton]="true"
  (backClicked)="navigateBack()"
  (homeClicked)="goHome()"
  (logoutClicked)="logout()"
></app-header>

<div class="container">
  <div class="page-content">
    <h1>ุชุณุฌูู ุจูุงูุงุช ุงูููุงุญู ูููุจูู</h1>
    <p class="subtitle">ุฃุฏุฎู ุฑูู ุงููุจูู ููุจุฏุก</p>

    <!-- Building Number Search -->
    <div class="search-section">
      <div class="form-group">
        <label>ุฑูู ุงููุจูู <span class="required">*</span></label>
        <div class="search-input-wrapper">
          <input 
            [(ngModel)]="buildingNumber" 
            name="buildingNumber"
            type="text" 
            class="form-input"
            placeholder="ุฃุฏุฎู ุฑูู ุงููุจูู"
            (keyup.enter)="searchBuilding()"
          />
          <button type="button" (click)="searchBuilding()" class="btn btn-search">
            <span>๐</span>
            ุจุญุซ
          </button>
        </div>
      </div>
    </div>

    <!-- Annexes Form (shown after search) -->
    @if (showForm()) {
      <form (ngSubmit)="submitData()" class="annexes-form">
      <div *ngFor="let annex of annexesList; let i = index" class="annex-item">
        <div class="annex-header">
          <h3>ุงูููุญู ุฑูู {{ annex.id }}</h3>
          <button
            *ngIf="annexesList.length > 1"
            type="button"
            (click)="removeAnnex(i)"
            class="btn-remove"
          >
            โ
          </button>
        </div>

        <div class="annex-fields">
          <div class="form-row">
            <div class="form-group">
              <label>ุฅุฌูุงูู ุนุฏุฏ ุงูุฃุฏูุงุฑ <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.totalFloors" 
                [name]="'totalFloors' + i" 
                type="number" 
                class="form-input"
                placeholder="ุฃุฏุฎู ุนุฏุฏ ุงูุฃุฏูุงุฑ"
              />
            </div>

            <div class="form-group">
              <label>ุญุงูุฉ ูููู ุงูููุญู <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.structureCondition" 
                [name]="'structureCondition' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ุญุงูุฉ ุงููููู"
              />
            </div>

            <div class="form-group">
              <label>ุฅุฌูุงูู ูุณุงุญุฉ ุงูููุญู <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.totalArea" 
                [name]="'totalArea' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ุงููุณุงุญุฉ (ูยฒ)"
              />
            </div>

            <div class="form-group">
              <label>ุชุงุฑูุฎ ุฅูุดุงุก ุงูููุญู <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.constructionDate" 
                [name]="'constructionDate' + i" 
                type="date" 
                class="form-input"
              />
            </div>

            <div class="form-group">
              <label>ุญุงูุฉ ุชุดุทูุจุงุช ุฏุงุฎููุฉ <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.interiorFinishingCondition" 
                [name]="'interiorFinishingCondition' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ุญุงูุฉ ุงูุชุดุทูุจุงุช"
              />
            </div>

            <div class="form-group">
              <label>ูุงุจููุฉ ุงูููุญู ููุชุนููุฉ <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.expansionCapability" 
                [name]="'expansionCapability' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ูุงุจููุฉ ุงูุชุนููุฉ"
              />
            </div>

            <div class="form-group">
              <label>ูุธุงู ุฅูุดุงุก ุงูููุญู <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.constructionSystem" 
                [name]="'constructionSystem' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ูุธุงู ุงูุฅูุดุงุก"
              />
            </div>

            <div class="form-group">
              <label>ุทุฑููุฉ ุฅูุดุงุก ุงูููุญู <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.constructionMethod" 
                [name]="'constructionMethod' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ุทุฑููุฉ ุงูุฅูุดุงุก"
              />
            </div>

            <div class="form-group">
              <label>ููุงุฏ ุจูุงุก ุงูุฃุณูู <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.ceilingMaterials" 
                [name]="'ceilingMaterials' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ููุงุฏ ุงูุฃุณูู"
              />
            </div>

            <div class="form-group">
              <label>ููุงุฏ ุจูุงุก ุญูุงุฆุท ุงูููุญู <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.wallMaterials" 
                [name]="'wallMaterials' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ููุงุฏ ุงูุญูุงุฆุท"
              />
            </div>

            <div class="form-group">
              <label>ุชุดุทูุจ ุงููุงุฌูุงุช ุฎุงุฑุฌู <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.exteriorFacadeFinishing" 
                [name]="'exteriorFacadeFinishing' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ุชุดุทูุจ ุงููุงุฌูุงุช"
              />
            </div>

            <div class="form-group">
              <label>ุฃุนูุงู ุตุญูุฉ <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.sanitaryWorks" 
                [name]="'sanitaryWorks' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ุญุงูุฉ ุงูุฃุนูุงู ุงูุตุญูุฉ"
              />
            </div>

            <div class="form-group">
              <label>ุฃุนูุงู ููุฑุจุงุฆูุฉ <span class="required">*</span></label>
              <input 
                [(ngModel)]="annex.electricalWorks" 
                [name]="'electricalWorks' + i" 
                type="text" 
                class="form-input"
                placeholder="ุฃุฏุฎู ุญุงูุฉ ุงูุฃุนูุงู ุงูููุฑุจุงุฆูุฉ"
              />
            </div>
          </div>
        </div>
      </div>

      <button type="button" (click)="addAnnex()" class="btn btn-add">
        + ุฅุถุงูุฉ ููุญู
      </button>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">โ ุญูุธ ุงูุจูุงูุงุช</button>
      </div>
    </form>
    }
  </div>
</div>
