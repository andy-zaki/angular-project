<div class="land-inquiry-container">
  <!-- Header Section -->
  <header class="land-inquiry-header">
    <!-- Header Top Section -->
    <div class="header-top">
      <div class="organization-info">
        <h1 class="organization-name">ุงูููุฆุฉ ุงูุนุงูุฉ ููุงุจููุฉ ุงูุชุนููููุฉ</h1>
        <p class="organization-subtitle">General Authority for Educational Buildings</p>
      </div>
      
      <div class="header-actions">
        <button 
          class="back-button" 
          (click)="goBack()" 
          aria-label="ุงูุนูุฏุฉ ููุงุฆูุฉ ุงููุจูู ุงูุชุนูููู"
          title="ุงูุนูุฏุฉ ููุงุฆูุฉ ุงููุจูู ุงูุชุนูููู"
          type="button">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path 
              d="M15 18L9 12L15 6" 
              stroke="currentColor" 
              stroke-width="2" 
              stroke-linecap="round" 
              stroke-linejoin="round"
            />
          </svg>
          <span>ุงูุนูุฏุฉ</span>
        </button>
        
        <button 
          class="logout-button"
          (click)="logout()"
          aria-label="ุฎุฑูุฌ ูู ุงููุธุงู ูุฅููุงุก ุงูุฌูุณุฉ"
          title="ุฎุฑูุฌ ูู ุงููุธุงู"
          type="button"
        >
          <span class="logout-icon" aria-hidden="true">๐ช</span>
          <span class="logout-text">ุฎุฑูุฌ ูู ุงููุธุงู</span>
        </button>
      </div>
    </div>
    
    <!-- Header Bottom Section -->
    <div class="header-bottom">
      <div class="page-info">
        <h2 class="page-title">ุงูุงุณุชุนูุงู ุนู ุจูุงูุงุช ูุทุน ุงูุฃุฑุงุถู</h2>
        <p class="page-subtitle">ุงูุจุญุซ ูู ูุงุนุฏุฉ ุจูุงูุงุช ูุทุน ุงูุฃุฑุงุถู ุงููุฎุตุตุฉ ูููุจุงูู ุงูุชุนููููุฉ</p>
      </div>
    </div>
  </header>

  <!-- Main Content Section -->
  <main class="land-inquiry-main">
    <div class="content-container">
      
      <!-- Search Form -->
      <div class="search-section">
        <div class="search-card">
          <h3 class="search-title">
            <span class="search-icon">๐</span>
            ุจุญุซ ุนู ูุทุนุฉ ุฃุฑุถ
          </h3>
          
          <form [formGroup]="searchForm" (ngSubmit)="onSearch()" class="search-form">
            <div class="form-group">
              <label for="referenceNumber" class="form-label">
                ุงูุฑูู ุงูุชุนุฑููู ููุทุนุฉ ุงูุฃุฑุถ
                <span class="required">*</span>
              </label>
              <input
                type="text"
                id="referenceNumber"
                formControlName="referenceNumber"
                class="form-input"
                [class.error]="getFieldError('referenceNumber')"
                placeholder="ุฃุฏุฎู ุงูุฑูู ุงูุชุนุฑููู (ูุซุงู: 132513)"
                autocomplete="off"
              />
              @if (getFieldError('referenceNumber')) {
                <div class="error-message">
                  {{ getFieldError('referenceNumber') }}
                </div>
              }
            </div>
            
            <div class="form-actions">
              <button 
                type="submit" 
                class="search-btn"
                [disabled]="isSearching()"
                [class.loading]="isSearching()">
                @if (isSearching()) {
                  <span class="spinner"></span>
                  <span>ุฌุงุฑู ุงูุจุญุซ...</span>
                } @else {
                  <span class="btn-icon">๐</span>
                  <span>ุจุญุซ</span>
                }
              </button>
              
              <button 
                type="button" 
                class="reset-btn"
                (click)="onReset()"
                [disabled]="isSearching()">
                <span class="btn-icon">๐</span>
                <span>ุฅุนุงุฏุฉ ุชุนููู</span>
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Results Section -->
      @if (hasSearched()) {
        <div class="results-section">
          @if (landData()) {
            <div class="results-header">
              <h3 class="results-title">
                <span class="results-icon">๐</span>
                ูุชุงุฆุฌ ุงูุจุญุซ
                <span class="results-count">(ูุชูุฌุฉ ูุงุญุฏุฉ)</span>
              </h3>
            </div>
            
            <div class="result-card">
              <div class="card-header">
                <h4 class="card-title">
                  <span class="card-icon">๐ข</span>
                  ุจูุงูุงุช ูุทุนุฉ ุงูุฃุฑุถ - {{ landData()?.referenceNumber }}
                </h4>
                <div class="header-actions">
                  <div class="status-badges">
                    <span 
                      class="status-badge approval"
                      [class.approved]="landData()?.approvalStatus === 'ูุนุชูุฏ'"
                      [class.pending]="landData()?.approvalStatus === 'ุชุญุช ุงููุฑุงุฌุนุฉ'">
                      {{ landData()?.approvalStatus }}
                    </span>
                    <span 
                      class="status-badge usage"
                      [class.active]="landData()?.usageStatus === 'ูุณุชุฎุฏู'"
                      [class.inactive]="landData()?.usageStatus === 'ุบูุฑ ูุณุชุฎุฏู'">
                      {{ landData()?.usageStatus }}
                    </span>
                  </div>
                  <button 
                    class="building-inquiry-btn"
                    (click)="openBuildingInquiry()"
                    type="button">
                    <span class="btn-icon">๐๏ธ</span>
                    <span>ุงุณุชุนูุงู ุงููุจูู</span>
                  </button>
                </div>
              </div>
              
              <div class="card-content">
                <div class="info-grid">
                  <div class="info-section basic-info">
                    <h5 class="section-title">
                      <span class="section-icon">โน๏ธ</span>
                      ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
                    </h5>
                    <div class="info-items">
                      <div class="info-item">
                        <span class="label">ุงูุฑูู ุงูุชุนุฑููู:</span>
                        <span class="value">{{ landData()?.identificationNumber }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ููุฏ ุงูุฃุฑุถ:</span>
                        <span class="value">{{ landData()?.landCode }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงูููุฑ:</span>
                        <span class="value">{{ landData()?.headquarters }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงููุฑูุฒ/ุงููุณู:</span>
                        <span class="value">{{ landData()?.centerDepartment }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงููุฑูุฉ:</span>
                        <span class="value">{{ landData()?.village }}</span>
                      </div>
                      <div class="info-item highlight">
                        <span class="label">ุงููุณุงุญุฉ ุงููููุฉ:</span>
                        <span class="value area">{{ landData()?.totalArea | number:'1.2-2' }} ูยฒ</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="info-section ownership-info">
                    <h5 class="section-title">
                      <span class="section-icon">๐ค</span>
                      ูุนูููุงุช ุงูููููุฉ
                    </h5>
                    <div class="info-items">
                      <div class="info-item">
                        <span class="label">ุงููุงูู ุงูุญุงูู:</span>
                        <span class="value">{{ landData()?.currentOwner }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงููุงูู ุงูุฃุตูู:</span>
                        <span class="value">{{ landData()?.originalOwner }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงููุฑุญูุฉ:</span>
                        <span class="value">{{ landData()?.phase }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงููููุฐุฌ:</span>
                        <span class="value">{{ landData()?.model }}</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="info-section financial-info">
                    <h5 class="section-title">
                      <span class="section-icon">๐ฐ</span>
                      ุงููุนูููุงุช ุงููุงููุฉ
                    </h5>
                    <div class="info-items">
                      <div class="info-item">
                        <span class="label">ุชุณุนูุฑ ุงููุฌูุฉ:</span>
                        <span class="value price">{{ landData()?.committeePricing | number }} ุฌ.ู</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุณุนุฑ ุงูุดุฑุงุก:</span>
                        <span class="value price">{{ landData()?.purchasePrice | number }} ุฌ.ู</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ููุงูุถุงุช ุงูุจูุน:</span>
                        <span class="value">{{ landData()?.saleNegotiations }}</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="info-section status-info">
                    <h5 class="section-title">
                      <span class="section-icon">๐</span>
                      ุงูุญุงูุฉ ูุงููุณุชูุฏุงุช
                    </h5>
                    <div class="info-items">
                      <div class="info-item">
                        <span class="label">ุงูุงุนุชูุงุฏ:</span>
                        <span 
                          class="value status"
                          [class.approved]="landData()?.approval === 'ููุงูู'"
                          [class.pending]="landData()?.approval === 'ููุฏ ุงูุฏุฑุงุณุฉ'">
                          {{ landData()?.approval }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงูุชุณููู:</span>
                        <span class="value">{{ landData()?.housing }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงููุณุชูุฏุงุช:</span>
                        <span 
                          class="value documents"
                          [class.complete]="landData()?.documents === 'ููุชููุฉ'"
                          [class.incomplete]="landData()?.documents === 'ูุงูุตุฉ'">
                          {{ landData()?.documents }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงูุฎุทุฉ:</span>
                        <span class="value">{{ landData()?.plan }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุฅุฎุทุงุฑ ุงููุฑุน:</span>
                        <span class="value">{{ landData()?.branchNotification }}</span>
                      </div>
                      <div class="info-item">
                        <span class="label">ูููู ุงูุนูุงุฑูุฉ:</span>
                        <span class="value">{{ landData()?.realEstateStatus }}</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="info-section availability-info">
                    <h5 class="section-title">
                      <span class="section-icon">๐</span>
                      ุชููุฑ ุงูุจูุงูุงุช ูุงูููุงุญุธุงุช
                    </h5>
                    <div class="info-items">
                      <div class="info-item">
                        <span class="label">ุญุฏูุฏ ูุทุนุฉ ุงูุฃุฑุถ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.buildingBoundaries === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.buildingBoundaries === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.buildingBoundaries }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุจูุงูุงุช ุงูููุฒุงููุฉ ุงูุดุจููุฉ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.networkData === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.networkData === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.networkData }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ููุงุญุธุงุช ุงูููุฒุงููุฉ ุงูุดุจููุฉ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.networkObservations === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.networkObservations === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.networkObservations }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ูุฑุงูุจ ูุทุนุฉ ุงูุงุฑุถ ูู ุฅุฌูุงูู ูุทุนุฉ ุงูุงุฑุถ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.landAreaFromTotal === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.landAreaFromTotal === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.landAreaFromTotal }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ููุงุญุธุงุช ูุนุงููุฉ ูุทุนุฉ ุงูุงุฑุถ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.landInspectionDatabase === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.landInspectionDatabase === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.landInspectionDatabase }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุนูุงุฆู ุฅูุดุงุก ูุทุนุฉ ุงูุงุฑุถ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.landCreationObstacles === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.landCreationObstacles === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.landCreationObstacles }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ูุณุชูุฏุงุช ูุทุนุฉ ุงูุงุฑุถ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.landConstructionData === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.landConstructionData === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.landConstructionData }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ูุคุดุฑ ุงุณุชูุงู ูุทุนุฉ ุงูุงุฑุถ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.landReceiptDatabase === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.landReceiptDatabase === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.landReceiptDatabase }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุงููุจุงูุบ ุงููุฏููุนุฉ ููุฃุฑุถ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.paidAmountsDatabase === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.paidAmountsDatabase === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.paidAmountsDatabase }}
                        </span>
                      </div>
                      <div class="info-item">
                        <span class="label">ุจูุงูุงุช ูุฑุงุฑ ุงูุชูููุณ:</span>
                        <span 
                          class="value availability"
                          [class.available]="landData()?.decisionData === 'ููุฌูุฏ'"
                          [class.unavailable]="landData()?.decisionData === 'ุบูุฑ ููุฌูุฏ'">
                          {{ landData()?.decisionData }}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          } @else {
            <div class="no-results">
              <div class="no-results-icon">๐ญ</div>
              <h3 class="no-results-title">ูุง ุชูุฌุฏ ูุชุงุฆุฌ</h3>
              <p class="no-results-message">
                ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ููุฐุง ุงูุฑูู ุงูุชุนุฑููู.
                <br>
                ุชุฃูุฏ ูู ุตุญุฉ ุงูุฑูู ูุญุงูู ูุฑุฉ ุฃุฎุฑู.
              </p>
            </div>
          }
        </div>
      }
      
    </div>
  </main>

  <!-- Building Inquiry Popup Modal -->
  @if (showBuildingPopup()) {
    <div class="popup-overlay" (click)="closeBuildingPopup()">
      <div class="popup-content" (click)="$event.stopPropagation()">
        <div class="popup-header">
          <h3 class="popup-title">
            <span class="popup-icon">๐๏ธ</span>
            ุงุณุชุนูุงู ุงููุจูู - ููุงูุน ุงูุจูุงุก
          </h3>
          <button 
            class="close-btn"
            (click)="closeBuildingPopup()"
            type="button">
            <span>โ</span>
          </button>
        </div>
        
        <div class="popup-body">
          <div class="building-table-container">
            <table class="building-data-table">
              <thead>
                <tr>
                  <th>ุงูููุฏ</th>
                  <th>ุงุณู ุงููููุน</th>
                  <th>ุทูู ุงูุญุฏ</th>
                  <th>ุงูุฌุงุฑ</th>
                  <th>ุงููุทููุจ</th>
                  <th>ููุณูุจ ููุทุฉ ุงูุจุฏุงุก</th>
                  <th>ููุณูุจ ููุทุฉ ุงูููุงูุฉ</th>
                  <th>ุตูุฑ</th>
                </tr>
              </thead>
              <tbody>
                @for (building of buildingData(); track building.id) {
                  <tr class="building-row">
                    <td class="building-id">{{ building.id }}</td>
                    <td class="building-code">{{ building.code }}</td>
                    <td class="location-name">{{ building.locationName }}</td>
                    <td class="coordinates">{{ building.coordinates }}</td>
                    <td class="status">{{ building.status }}</td>
                    <td class="required-status">{{ building.requiredStatus }}</td>
                    <td class="empty-field">ุตูุฑ</td>
                    <td class="empty-field">ุตูุฑ</td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
        
        <div class="popup-footer">
          <button 
            class="close-popup-btn"
            (click)="closeBuildingPopup()"
            type="button">
            <span class="btn-icon">โ</span>
            <span>ุฅุบูุงู</span>
          </button>
        </div>
      </div>
    </div>
  }
</div>