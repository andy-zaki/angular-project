<app-header 
  [pageTitle]="'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ù…Ø­ÙŠØ·Ø©'"
  [showBackButton]="true"
  [showHomeButton]="true"
  (backClicked)="navigateBack()"
  (homeClicked)="goHome()"
  (logoutClicked)="logout()"
></app-header>

<div class="container">
  <div class="page-content">
    <h1>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ù…Ø­ÙŠØ·Ø©</h1>
    <p class="subtitle">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ù…Ø­ÙŠØ·Ø© Ø¨Ø§Ù„Ù…Ø¨Ù†Ù‰</p>

    <!-- Roads Form -->
    <div class="form-wrapper">
      <form [formGroup]="roadsForm" (ngSubmit)="onSubmit()">
        <div class="form-section">
          <h3 class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨Ù†Ù‰ ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="buildingCode">ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¨Ù†Ù‰ <span class="required">*</span></label>
              <input 
                type="text" 
                id="buildingCode" 
                formControlName="buildingCode"
                placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¨Ù†Ù‰"
                [class.error]="roadsForm.get('buildingCode')?.invalid && roadsForm.get('buildingCode')?.touched"
              />
              @if (roadsForm.get('buildingCode')?.invalid && roadsForm.get('buildingCode')?.touched) {
                <span class="error-message">ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¨Ù†Ù‰ Ù…Ø·Ù„ÙˆØ¨</span>
              }
            </div>

            <div class="form-group">
              <label for="centerCode">ÙƒÙˆØ¯ Ø§Ù„Ù…Ø±ÙƒØ² <span class="required">*</span></label>
              <input 
                type="text" 
                id="centerCode" 
                formControlName="centerCode"
                placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù…Ø±ÙƒØ²"
                [class.error]="roadsForm.get('centerCode')?.invalid && roadsForm.get('centerCode')?.touched"
              />
              @if (roadsForm.get('centerCode')?.invalid && roadsForm.get('centerCode')?.touched) {
                <span class="error-message">ÙƒÙˆØ¯ Ø§Ù„Ù…Ø±ÙƒØ² Ù…Ø·Ù„ÙˆØ¨</span>
              }
            </div>

            <div class="form-group">
              <label for="branchCode">ÙƒÙˆØ¯ Ø§Ù„ÙØ±Ø¹ <span class="required">*</span></label>
              <input 
                type="text" 
                id="branchCode" 
                formControlName="branchCode"
                placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ÙØ±Ø¹"
                [class.error]="roadsForm.get('branchCode')?.invalid && roadsForm.get('branchCode')?.touched"
              />
              @if (roadsForm.get('branchCode')?.invalid && roadsForm.get('branchCode')?.touched) {
                <span class="error-message">ÙƒÙˆØ¯ Ø§Ù„ÙØ±Ø¹ Ù…Ø·Ù„ÙˆØ¨</span>
              }
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø±ÙŠÙ‚</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="mainRoadTypeCode">ÙƒÙˆØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ <span class="required">*</span></label>
              <div class="code-with-name">
                <select 
                  id="mainRoadTypeCode" 
                  formControlName="mainRoadTypeCode"
                  [class.error]="roadsForm.get('mainRoadTypeCode')?.invalid && roadsForm.get('mainRoadTypeCode')?.touched"
                >
                  <option value="" disabled>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø·Ø±ÙŠÙ‚</option>
                  @for (type of mainRoadTypes; track type.code) {
                    <option [value]="type.code">{{ type.code }} - {{ type.name }}</option>
                  }
                </select>
                @if (roadsForm.get('mainRoadTypeCode')?.value) {
                  <span class="selected-name">{{ getMainRoadTypeName(roadsForm.get('mainRoadTypeCode')?.value) }}</span>
                }
              </div>
              @if (roadsForm.get('mainRoadTypeCode')?.invalid && roadsForm.get('mainRoadTypeCode')?.touched) {
                <span class="error-message">ÙƒÙˆØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù…Ø·Ù„ÙˆØ¨</span>
              }
            </div>

            <div class="form-group">
              <label for="roadWidth">Ø¹Ø±Ø¶ Ø§Ù„Ø·Ø±ÙŠÙ‚ (Ù…ØªØ±) <span class="required">*</span></label>
              <input 
                type="number" 
                id="roadWidth" 
                formControlName="roadWidth"
                placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ø·Ø±ÙŠÙ‚"
                min="0"
                step="0.1"
                [class.error]="roadsForm.get('roadWidth')?.invalid && roadsForm.get('roadWidth')?.touched"
              />
              @if (roadsForm.get('roadWidth')?.invalid && roadsForm.get('roadWidth')?.touched) {
                <span class="error-message">Ø¹Ø±Ø¶ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ù…Ø·Ù„ÙˆØ¨</span>
              }
            </div>

            <div class="form-group">
              <label for="movementDirectionCode">ÙƒÙˆØ¯ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ© <span class="required">*</span></label>
              <div class="code-with-name">
                <select 
                  id="movementDirectionCode" 
                  formControlName="movementDirectionCode"
                  [class.error]="roadsForm.get('movementDirectionCode')?.invalid && roadsForm.get('movementDirectionCode')?.touched"
                >
                  <option value="" disabled>Ø§Ø®ØªØ± Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ©</option>
                  @for (direction of movementDirections; track direction.code) {
                    <option [value]="direction.code">{{ direction.code }} - {{ direction.name }}</option>
                  }
                </select>
                @if (roadsForm.get('movementDirectionCode')?.value) {
                  <span class="selected-name">{{ getMovementDirectionName(roadsForm.get('movementDirectionCode')?.value) }}</span>
                }
              </div>
              @if (roadsForm.get('movementDirectionCode')?.invalid && roadsForm.get('movementDirectionCode')?.touched) {
                <span class="error-message">ÙƒÙˆØ¯ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ© Ù…Ø·Ù„ÙˆØ¨</span>
              }
            </div>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">
            <span>ğŸ’¾</span>
            Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
          </button>
          <button type="button" class="btn btn-secondary" (click)="onReset()">
            <span>ğŸ”„</span>
            Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
